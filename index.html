<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>变量道 · 心理自救 | Variable Dao</title>
<meta name="color-scheme" content="light dark" />
<style>
:root{
  --bg:#fff; --fg:#151517; --muted:#63636b; --card:#f6f7f9; --line:#e7e8ec; --accent:#111;
}
@media (prefers-color-scheme: dark){
  :root{ --bg:#0c0d11; --fg:#eaeaf1; --muted:#a6a9b4; --card:#151720; --line:#222533; --accent:#eaeaf1; }
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font:16px/1.65 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}
.wrap{max-width:1024px;margin:0 auto;padding:0 16px}
a{color:inherit;text-decoration:none}
header{position:sticky;top:0;border-bottom:1px solid var(--line);background:color-mix(in oklab, var(--bg) 85%, transparent);backdrop-filter:saturate(160%) blur(8px);z-index:20}
.nav{height:56px;display:flex;align-items:center;justify-content:space-between}
.brand{font-weight:800;letter-spacing:.2px}
.nav-right{display:flex;gap:10px;align-items:center}
.btn{border:1px solid var(--line);padding:8px 12px;border-radius:12px}
.btn[aria-disabled="true"]{opacity:.45;cursor:not-allowed}
select{appearance:none;border:1px solid var(--line);background:var(--card);color:var(--fg);border-radius:12px;padding:8px 28px 8px 10px}
/* hero */
.hero{padding:64px 0 36px}
.h1{font-size:clamp(28px,6vw,44px);line-height:1.15;margin:0 0 12px;font-weight:800}
.lead{margin:8px 0;color:var(--muted);font-size:clamp(15px,3.5vw,19px)}
.cta{margin-top:20px;display:flex;gap:12px;align-items:center}
.btn-primary{display:inline-flex;align-items:center;gap:10px;border:1px solid var(--fg);border-radius:14px;padding:12px 16px;font-weight:700}
.pen{width:18px;height:18px}
.note{margin-top:10px;color:var(--muted)}
.pill{display:inline-block;border:1px solid var(--line);padding:2px 8px;border-radius:999px;margin-right:6px;font-size:12px;color:var(--muted)}
/* cards */
section[hidden]{display:none}
.grid{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:12px;margin:16px 0 36px}
@media (min-width:640px){.grid{grid-template-columns:repeat(2,1fr)}}
@media (min-width:960px){.grid{grid-template-columns:repeat(3,1fr)}}
.card{padding:16px;border:1px solid var(--line);border-radius:14px;background:var(--card);cursor:pointer;transition:transform .08s ease,border-color .15s ease}
.card:hover{transform:translateY(-1px);border-color:var(--fg)}
.card h3{margin:0 0 6px;font-size:18px}
.card small{display:block;color:var(--muted)}
/* modal */
dialog{width:min(860px,94vw);border:1px solid var(--line);border-radius:16px;padding:0;background:var(--bg);color:var(--fg)}
.dlg-head{display:flex;justify-content:space-between;align-items:center;padding:14px 18px;border-bottom:1px solid var(--line)}
.dlg-body{padding:18px;max-height:min(72vh, calc(100dvh - 160px));overflow:auto}
.x{border:1px solid var(--line);border-radius:10px;padding:6px 10px}
.sep{border-top:1px dashed var(--line);margin:16px 0}
h4{margin:18px 0 8px}
blockquote{margin:12px 0;padding-left:12px;border-left:3px solid var(--line);color:var(--muted)}
footer{border-top:1px solid var(--line);padding:28px 0 48px;color:var(--muted)}
/* accessibility */
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
</style>
</head>
<body>
<header>
  <div class="wrap nav">
    <a class="brand" href="#/"><span data-i18n="brand">变量道 · 心理自救</span></a>
    <div class="nav-right">
      <a class="btn" href="#/" data-i18n="nav.home">首页</a>
      <a class="btn" aria-disabled="true" role="link" tabindex="-1" data-i18n="nav.more">更多内容正在搭建中（点击无效）</a>
      <label class="sr-only" for="langSel">Language</label>
      <select id="langSel">
        <option value="en">EN</option>
        <option value="zh">中文</option>
        <option value="ja">日本語</option>
        <option value="ko">한국어</option>
      </select>
    </div>
  </div>
</header>

<main class="wrap">
  <!-- 1: HERO -->
  <section id="hero" class="hero">
    <h1 class="h1" data-i18n="hero.title">变量道 · 心理自救</h1>
    <p class="lead" data-i18n="hero.l1">他们给你故事，你只被分配到角色。</p>
    <p class="lead" data-i18n="hero.l2">我们给你笔。</p>
    <p class="lead" data-i18n="hero.l3">思维进化，不逃避不妄想——把现实当素材来书写。</p>
    <p class="lead" data-i18n="hero.l4">从此，故事听你的。</p>
    <div class="cta">
      <a class="btn-primary" id="goCards">
        <svg class="pen" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M3 21l3.8-1 10.6-10.6a2.2 2.2 0 0 0 0-3.2l-.6-.6a2.2 2.2 0 0 0-3.2 0L3 15.8 3 21zM14 6l4 4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span data-i18n="hero.cta">我来执笔</span>
      </a>
    </div>
    <p class="note"><span class="pill">Minimal</span><span class="pill">No comments</span><span class="pill">Multi‑language</span></p>
  </section>

  <!-- 2: CARDS (must come from 1) -->
  <section id="cards" hidden>
    <p class="lead" data-i18n="cards.note">“看到哪条让你想爆粗口，就点它。”</p>
    <div id="cardsGrid" class="grid"></div>
  </section>
</main>

<footer class="wrap">
  <div data-i18n="footer.copy">© 变量道</div>
  <div data-i18n="footer.tag">给思考者/洞察者的一方安静之地。</div>
</footer>

<!-- Modal -->
<dialog id="dlg">
  <div class="dlg-head">
    <strong id="dlgTitle">…</strong>
    <button class="x" id="dlgClose" aria-label="Close">✕</button>
  </div>
  <div class="dlg-body" id="dlgBody"></div>
</dialog>

<script>
// ---------- i18n core ----------
const I18N = {
  en:{
    brand:"Variable Dao · Psychological Self‑Rescue",
    nav:{home:"Home",more:"More coming (disabled)"},
    hero:{
      title:"Variable Dao · Psychological Self‑Rescue",
      l1:"They hand you a story and assign you a role.",
      l2:"We hand you the pen.",
      l3:"Evolving the mind—neither escapism nor delusion. Use reality as material.",
      l4:"From now on, the story listens to you.",
      cta:"I'll take the pen"
    },
    cardsNote:"Tap the one that makes you want to swear.",
    footer:{copy:"© Variable Dao",tag:"A quiet place for thinkers and observers."},
  },
  zh:{
    brand:"变量道 · 心理自救",
    nav:{home:"首页",more:"更多内容正在搭建中（点击无效）"},
    hero:{
      title:"变量道 · 心理自救",
      l1:"他们给你故事，你只被分配到角色。",
      l2:"我们给你笔。",
      l3:"思维进化，不逃避不妄想——把现实当素材来书写。",
      l4:"从此，故事听你的。",
      cta:"我来执笔"
    },
    cardsNote:"“看到哪条让你想爆粗口，就点它。”",
    footer:{copy:"© 变量道",tag:"给思考者/洞察者的一方安静之地。"},
  },
  ja:{
    brand:"変数道・心の自救",
    nav:{home:"ホーム",more:"準備中（無効）"},
    hero:{
      title:"変数道・心の自救",
      l1:"彼らは物語を与え、あなたに役だけを割り当てる。",
      l2:"私たちは筆を渡す。",
      l3:"逃避でも妄想でもない。現実を素材に書く。",
      l4:"物語は、あなたの声を聞く。",
      cta:"筆を取る"
    },
    cardsNote:"怒鳴りたくなる項目を押せ。",
    footer:{copy:"© 変数道",tag:"思考者と観察者のための静かな場所。"},
  },
  ko:{
    brand:"변수도 · 심리 자구",
    nav:{home:"홈",more:"준비 중(비활성)"},
    hero:{
      title:"변수도 · 심리 자구",
      l1:"그들은 이야기를 주고, 너에게 배역만 준다.",
      l2:"우리는 펜을 건넨다.",
      l3:"도피도 망상도 아니다. 현실을 재료로 써라.",
      l4:"이제부터 이야기는 너를 따른다.",
      cta:"내가 붓을 든다"
    },
    cardsNote:"욕이 튀어나오는 카드를 눌러라.",
    footer:{copy:"© 변수도",tag:"사유와 통찰을 위한 조용한 공간."},
  }
};

// ---------- language detect ----------
function getLang(){
  const url = new URL(location.href);
  const q = url.searchParams.get('lang');
  if(q){ localStorage.setItem('lang', q); return q; }
  const ls = localStorage.getItem('lang'); if(ls) return ls;
  const nav = (navigator.language||'en').slice(0,2);
  return ['en','zh','ja','ko'].includes(nav)? nav:'en';
}
function applyI18N(lang){
  const dict = I18N[lang] || I18N.en;
  document.documentElement.lang = lang;
  // text nodes
  document.querySelectorAll("[data-i18n]").forEach(el=>{
    const path = el.getAttribute("data-i18n").split(".");
    let cur = dict;
    for(const k of path){ if(cur && k in cur){ cur = cur[k]; } }
    if(typeof cur === "string"){ el.textContent = cur; }
  });
  document.querySelector(".brand span").textContent = dict.brand;
