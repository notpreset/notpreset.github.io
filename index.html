<!doctype html>
<html lang="zh">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Variable Dao — 单文件（返回键粘顶 + 详情随语言切换）</title>
<style>
  :root{--maxw:900px;--pad:16px;--accent:#2b6df6;--stickyTop:60px}
  *{box-sizing:border-box}
  body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif;margin:0;color:#111;background:#fff;line-height:1.65}
  header{position:sticky;top:0;background:rgba(255,255,255,.92);padding:8px 12px;border-bottom:1px solid rgba(0,0,0,.06);z-index:20;display:flex;align-items:center;gap:10px;overflow:auto}
  .nav-left{display:flex;gap:8px;align-items:center}
  .chip{padding:7px 11px;border-radius:999px;border:1px solid rgba(0,0,0,.08);background:transparent;cursor:pointer;white-space:nowrap}
  select.chip{font-size:13px; padding:6px 10px; min-width:86px; max-width:120px}
  .grow{flex:1}
  main{max-width:var(--maxw);margin:0 auto;padding:0 var(--pad)}
  /* Step 1 */
  .hero{max-width:720px;margin:12vh auto 10vh;text-align:center}
  .h1{font-weight:900;font-size:clamp(28px,5.2vw,44px);margin:6px 0 10px}
  .lead{color:rgba(0,0,0,.75);font-size:16px;margin:8px 0 18px}
  .btn{display:inline-block;padding:12px 18px;border-radius:12px;border:1px solid rgba(0,0,0,.08);cursor:pointer;font-weight:700}
  /* Step 2 selection */
  .page{display:none}
  #select{max-width:760px;margin:8vh auto 14vh}
  .sel-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
  .sel-title{font-size:18px;font-weight:900}
  .cards{display:grid;gap:14px}
  .card{border:1px solid rgba(0,0,0,.08);border-radius:14px;padding:12px;background:#fff}
  .card h3{margin:6px 0;font-size:18px}
  .muted{opacity:.7;font-size:14px}
  /* detail view inside select */
  #detail{display:none;margin-top:12px}
  #detail.active{display:block}
  #detail .content{padding:16px;border-radius:12px;border:1px solid rgba(0,0,0,.08);background:#fff}
  .back{position:sticky; top:var(--stickyTop); z-index:15; margin:0 0 12px;display:inline-flex;align-items:center;gap:6px;padding:8px 12px;border:1px solid rgba(0,0,0,.08);border-radius:999px;background:#fff;cursor:pointer}
  .pill{display:inline-block;padding:8px 12px;border-radius:999px;background:#f3f6ff;font-weight:800;margin:10px 0}
  .long{font-size:18px;line-height:1.9;color:#111}
  footer{max-width:var(--maxw);margin:0 auto 26px;padding:0 var(--pad);color:rgba(0,0,0,.6);font-size:13px;text-align:center}
  @media (prefers-color-scheme:dark){
    body{background:#050507;color:#e9e9ee}
    header{background:rgba(5,5,7,.6);border-bottom:1px solid rgba(255,255,255,.06)}
    .card,#detail .content,.back{background:#0e0e11;border-color:#26262b}
    .pill{background:#132032;color:#e8f2ff}
  }
</style>
</head>
<body>
<header>
  <div class="nav-left">
    <button class="chip" id="navHome">首页</button>
    <button class="chip" id="navStories">故事</button>
    <button class="chip" id="navAbout">关于我们</button>
  </div>
  <div class="grow"></div>
  <select id="layoutSelect" class="chip" title="layout">
    <option value="mobile">📱 Mobile</option>
    <option value="desktop">🖥 Desktop</option>
  </select>
  <select id="langSelect" class="chip" title="language">
    <option value="" data-placeholder>Language</option>
    <option value="zh">中文</option>
    <option value="en">EN</option>
    <option value="ja">日本語</option>
    <option value="ko">한국어</option>
  </select>
</header>

<main>
  <!-- Step 1 -->
  <section id="landing" class="page" style="display:block">
    <div class="hero">
      <div class="h1" id="heroTitle">变量道 · 心理自救</div>
      <div class="lead" id="heroLead">他们给你故事，你只被分配到角色。 我们给你笔。</div>
      <button id="startBtn" class="btn">🖊️ 我来执笔</button>
    </div>
  </section>

  <!-- Step 2 (only visible after clicking the pen button) -->
  <section id="select" class="page">
    <div class="sel-head">
      <div class="sel-title" id="selectTitle">“看到哪条让你想爆粗口，就点它。”</div>
      <button class="chip" id="selBack">← 返回首页</button>
    </div>
    <div class="cards" id="cardsList"></div>
    <!-- detail lives inside select page -->
    <div id="detail" aria-hidden="true">
      <button class="back" id="backToSelect">← 返回选卡</button>
      <div class="content" id="detailContent"></div>
    </div>
  </section>

  <!-- placeholders for nav -->
  <section id="stories" class="page">
    <div class="card"><strong>故事</strong><p class="muted">内容正在搭建中，敬请期待。</p></div>
  </section>

  <section id="about" class="page">
    <div class="card"><strong>关于我们（预览）</strong>
      <p class="muted">声明、我们的立场与发起人介绍将在最终版完整展示。</p>
    </div>
  </section>
</main>

<footer>© 2025 变量道 · 让世界成为可书写的素材。</footer>

<script>
// ====== 多语言 UI 文案 ======
const UI = {
  selectTitle: { zh:'“看到哪条让你想爆粗口，就点它。”', en:'“Tap the line that makes you want to swear.”', ja:'「どの一文が一番ムカつく？それをタップ。」', ko:'“욕이 튀어나오게 하는 줄을 탭하세요.”' },
  backHome:    { zh:'← 返回首页', en:'← Back to Home', ja:'← ホームへ戻る', ko:'← 홈으로' },
  backSelect:  { zh:'← 返回选卡', en:'← Back to list', ja:'← 選択へ戻る', ko:'← 목록으로' }
};

// ====== 数据（仅一张卡：当空气）======
const DATA = {
  cards: [{
    id: "air",
    title: { zh: "当空气", en: "Invisible", ja: "空気になる", ko: "공기 취급" },
    sting: { zh: "我在，你们当没看见。", en: "I'm here, and you act like you can't see me.", ja: "私はここにいるのに、誰も見ない。", ko: "나는 여기 있는데, 다들 못 본 척한다." },
    ask:   { zh: "谁把我当透明人？", en: "Who treats me like I'm transparent?", ja: "誰が私を透明人間にしている？", ko: "누가 나를 투명인간으로 취급하나?" },
    body: {
      zh: `短篇｜《两个人影》

同一间教室里，有两个人影：A 和 B。
老师点名老漏、分组没人喊、举手没人看——他们都像空气。
黑板擦过一遍又一遍，他们的名字一次也没留下。

A 的故事这样写：
“乖一点，不添麻烦；用成绩说话；总有一天会被看到。”
于是他更安静，坐得更直。
一个月后，他开始怀疑：是不是我真的不重要。
他没错——安静、礼貌、克制都对；
但他的生命像被按了静音键，灯永远不会主动打到他身上。

B 的故事是另一个版本：
“既然没人看见，那我先让世界听到一声响。”
做广播体操时，他故意慢半拍或夸张地做错动作，引得旁边的同学笑场
他会去广播站把班级球赛剪了段“假正经解说”在下课时用教学设备放映，
年级主任皱眉：“别闹。”
但全班开始叫他“解说员”。
他也没错——调皮、出戏、被批评都对；
可他从“空气”变成了可被叫到的人。

变量道 · 道骨
🦴确认感（I exist for someone）
🦴人不只是要“我存在”，而是“我的存在被看见”。
🦴被爱、被骂都行，人最怕是彻底的无视。

变量道 · 道证
• A 被困在“等别人给我一个角色”的故事里。
• B 把“我是谁”提前，先丢下一个响亮的记号（外号、段子、被点名的理由）。
• 两种逻辑都对：A 的守规则对，B 的要回叙事权也对。
既然都对，就活在那个更有生命力、更快乐的“对”里。

变量道 · 觉悟
被看见，是人类的底层燃料。
不是求爱，不是求骂，是在别人的世界里钉下一枚“这是我”的小图钉。
从“空气”到“被叫到名字”，新的故事就开始了。`,
      en: `Short · "Two Silhouettes"

In the same classroom sat two silhouettes: A and B.
Roll calls kept skipping them. No one called them into groups. Raised hands went unseen—they were like air.
The blackboard was wiped again and again, and their names never stayed.

A’s story goes like this:
“Be good. Don’t cause trouble. Let grades speak. One day I’ll be seen.”
So he sat even straighter, even quieter.
A month later, he began to suspect: maybe I really don’t matter.
He wasn’t wrong—quiet, polite, restrained are all “right,”
but life felt like the mute button was pressed; the light would never turn to him on its own.

B’s story is another version:
“If no one sees me, I’ll at least make a sound.”
During morning exercise he deliberately went half a beat off, exaggerated a move, made classmates laugh.
He cut a mock-serious commentary of the class game and played it through the school system after class.
The dean frowned: “Cut it out.”
But the class started calling him “the commentator.”
He wasn’t wrong either—mischievous, off-script, even scolded—yet he transformed from “air” to someone who gets called by name.

Variable Dao · Bone
🦴 Sense of confirmation (I exist for someone)
🦴 Humans need not only “I exist,” but “my existence is seen.”
🦴 Praise or scold—both beat being ignored.

Variable Dao · Evidence
• A is trapped in the story “wait for someone to give me a role.”
• B moves “who I am” up front and drops a loud marker (nickname, gag, a reason to be called).
• Both logics are right. So live in the version that’s more alive and joyful.

Variable Dao · Insight
To be seen is human fuel at the base layer.
You’re not begging love or insult; you’re pinning “this is me” in someone else’s world.
From “air” to “being called by name,” a new story begins.`
    }
  }]
};

// ====== 状态 & 语言 ======
const state = { 
  lang: (new URL(location.href)).searchParams.get('lang') || localStorage.getItem('vd_lang') || (navigator.language||'en').slice(0,2),
  step: 1,
  currentCard: null
};
function t(o){ return o[state.lang] || o.zh || ''; }

// ====== 渲染逻辑 ======
function showPage(id){
  document.querySelectorAll('.page').forEach(p=>p.style.display='none');
  document.getElementById(id).style.display='block';
}
function renderUIStrings(){
  document.getElementById('selectTitle').textContent = t(UI.selectTitle);
  document.getElementById('selBack').textContent     = t(UI.backHome);
  document.getElementById('backToSelect').textContent= t(UI.backSelect);
}
function renderList(){
  const list = document.getElementById('cardsList'); list.innerHTML='';
  DATA.cards.forEach(c=>{
    const el=document.createElement('div'); el.className='card';
    el.innerHTML=`<div class="muted">${t(c.sting)}</div><h3>${t(c.title)}</h3><div class="muted">${t(c.ask)}</div>`;
    el.addEventListener('click',()=>openDetail(c,true));
    list.appendChild(el);
  });
}
function openDetail(c, doScroll){
  state.currentCard = c;
  const det=document.getElementById('detail'); const box=document.getElementById('detailContent');
  const txt=(c.body[state.lang]&&c.body[state.lang].trim())?c.body[state.lang]:c.body.zh;
  let html=txt.replace(/\n\n/g,'</p><p>').replace(/\n/g,'<br>');
  html=html.replace(/变量道\s*·\s*道骨|Variable Dao\s*·\s*Bone|変数道・骨|변수도\s*·\s*뼈/g,'</p><div class="pill">道骨</div><p>');
  html=html.replace(/变量道\s*·\s*道证|Variable Dao\s*·\s*Evidence|変数道・証|변수도\s*·\s*증거/g,'</p><div class="pill">道证</div><p>');
  html=html.replace(/变量道\s*·\s*觉悟|Variable Dao\s*·\s*Insight|変数道・悟り|변수도\s*·\s*깨달음/g,'</p><div class="pill">觉悟</div><p>');
  box.innerHTML=`<h2>${t(c.title)}</h2><div class="muted">${t(c.sting)} · ${t(c.ask)}</div><div class="long"><p>${html}</p></div>`;
  det.classList.add('active'); det.setAttribute('aria-hidden','false');
  if(doScroll) det.scrollIntoView({behavior:'smooth', block:'start'});
}

// ====== 事件绑定 ======
document.getElementById('startBtn').addEventListener('click',()=>{
  // 点击笔 -> 进入“选卡页面”
  state.step=2;
  showPage('select'); renderUIStrings(); renderList();
  document.getElementById('selectTitle').scrollIntoView({behavior:'smooth'});
});
document.getElementById('selBack').addEventListener('click',()=>{
  state.step=1; showPage('landing');
  // 关闭详情
  document.getElementById('detail').classList.remove('active');
  document.getElementById('detail').setAttribute('aria-hidden','true');
});
document.getElementById('backToSelect').addEventListener('click',()=>{
  document.getElementById('detail').classList.remove('active');
  document.getElementById('detail').setAttribute('aria-hidden','true');
  document.getElementById('selectTitle').scrollIntoView({behavior:'smooth'});
});

// 顶部“首页/故事/关于我们”作为占位导航
document.getElementById('navHome').addEventListener('click',()=>showPage('landing'));
document.getElementById('navStories').addEventListener('click',()=>showPage('stories'));
document.getElementById('navAbout').addEventListener('click',()=>showPage('about'));

// 语言选择（占位 -> 选择后记忆）
const langSel=document.getElementById('langSelect');
if(!localStorage.getItem('vd_lang_selected')){ langSel.value=""; } else { langSel.value=state.lang; }
langSel.addEventListener('change',(e)=>{
  const v=e.target.value; if(!v) return;
  state.lang=v; localStorage.setItem('vd_lang',v); localStorage.setItem('vd_lang_selected','1');
  const ph=langSel.querySelector('option[data-placeholder]'); if(ph) ph.remove();
  // 刷新当前页面的文案
  if(state.step===2){ renderUIStrings(); renderList(); }
  if(document.getElementById('detail').classList.contains('active') && state.currentCard){
    openDetail(state.currentCard,false); // 仅刷新，不滚动
  }
});

// 初始：只显示 Step1
showPage('landing');
</script>
</body>
</html>
