
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>å˜é‡é“ Â· Variable Dao</title>
<meta name="description" content="å˜é‡é“ Â· å¿ƒç†è‡ªæ•‘ï½œæŠŠç°å®å½“ç´ ææ¥ä¹¦å†™ã€‚">
<style>
  :root{
    --maxw:900px;
    --pad:16px;
    --radius:14px;
    --muted:0.6;
    --accent: #4b6bfb;
  }
  html,body{margin:0;padding:0}
  body{
    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", "PingFang SC","Hiragino Sans GB","Microsoft YaHei", "Apple SD Gothic Neo", "Malgun Gothic", sans-serif;
    line-height:1.6;
    -webkit-font-smoothing: antialiased;
    color: #111;
    background: #fff;
  }
  @media (prefers-color-scheme: dark){
    body{ background:#0b0b0d; color:#eaeaf0;}
    .card, .panel { background:#141418; color:#eaeaf0; border-color:#24242a;}
    header, footer { background:#0b0b0d;}
    .muted{ color:rgba(234,234,240,var(--muted));}
    .btn{ color:#fff; }
  }
  a{ color:var(--accent); text-decoration:none}
  header{
    position:sticky; top:0; z-index:10;
    backdrop-filter: saturate(150%) blur(8px);
    background: rgba(255,255,255,0.7);
    border-bottom: 1px solid rgba(0,0,0,0.06);
  }
  @media (prefers-color-scheme: dark){
    header{ background: rgba(11,11,13,0.6); border-bottom:1px solid rgba(255,255,255,0.08);}
  }
  .nav{
    max-width:var(--maxw);
    margin:0 auto;
    padding: 10px var(--pad);
    display:flex; align-items:center; gap:10px;
  }
  .nav .grow{ flex:1 }
  .brand{ font-weight:700; letter-spacing:.2px}
  .nav a, .nav button, .nav select{
    font: inherit;
    background:transparent; border:0;
    color:inherit; cursor:pointer;
  }
  .chip{
    padding:6px 10px; border:1px solid rgba(0,0,0,.08); border-radius:20px;
  }
  @media (prefers-color-scheme: dark){
    .chip{ border-color: rgba(255,255,255,.12);}
  }
  .row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center}
  .hero{
    max-width:var(--maxw);
    margin: 28px auto 16px;
    padding: 0 var(--pad);
  }
  .h1{
    font-size: clamp(28px, 4vw, 44px);
    line-height:1.15;
    font-weight:800;
    letter-spacing:.3px;
  }
  .lead{ font-size: clamp(15px,2.4vw,18px); opacity:.9; }
  .btn{
    display:inline-flex; align-items:center; gap:10px;
    padding:14px 18px; border-radius:14px;
    border:1px solid rgba(0,0,0,.08);
    background: linear-gradient(180deg,#fff,#f6f7fb);
    box-shadow: 0 8px 20px rgba(0,0,0,.08);
    font-weight:700;
  }
  .btn svg{ width:22px; height:22px }
  @media (prefers-color-scheme: dark){
    .btn{ background: linear-gradient(180deg,#1a1a1f,#121218); border-color:#24242a; box-shadow: 0 8px 28px rgba(0,0,0,.35);}
  }

  .panel{
    max-width:var(--maxw);
    margin: 8px auto 60px;
    padding: 0 var(--pad);
  }
  .cards{
    display:grid;
    grid-template-columns: 1fr;
    gap:14px;
  }
  .card{
    background:#fff;
    border:1px solid rgba(0,0,0,.08);
    border-radius: var(--radius);
    padding:14px 16px;
  }
  .card h3{ margin:6px 0 8px; font-size:18px}
  .card .tag{ font-size:12px; opacity:.7}
  .muted{ opacity:.7 }
  .detail{
    display:none;
  }
  .detail.active{ display:block }
  .detail .back{
    position:sticky; top:56px; z-index:9; margin-bottom:10px;
  }
  .back button{
    padding:10px 12px; border-radius:12px; border:1px solid rgba(0,0,0,.08);
  }
  .section{ display:none }
  .section.active{ display:block }
  footer{
    padding: 24px var(--pad) 60px;
    border-top:1px solid rgba(0,0,0,.06);
    margin-top:40px;
  }
  .footer-wrap{ max-width:var(--maxw); margin:0 auto }
  .foot-note{ opacity:.7; font-size:13px}

  /* Layout toggle (mobile vs desktop style) */
  body.layout-desktop .cards{ grid-template-columns: repeat(2,1fr);}
  body.layout-desktop .h1{ font-size:44px }
  body.layout-desktop .panel, body.layout-desktop .hero{ max-width: 1100px }
  /* compact long content paragraphs */
  .long p{ margin: 8px 0 }
  .note{ font-size: 13px; opacity:.7 }

  /* simple toast */
  #toast{ position:fixed; left:50%; bottom:18px; transform:translateX(-50%); background:rgba(20,20,30,.9); color:#fff; padding:8px 12px; border-radius:999px; font-size:13px; display:none }
</style>
</head>
<body>
<header>
  <div class="nav">
    <div class="brand"><a href="#" id="nav-home">å˜é‡é“ Â· Variable Dao</a></div>
    <div class="grow"></div>
    <a class="chip" href="#" id="nav-home-btn" data-i18n="nav.home">é¦–é¡µ</a>
    <a class="chip" href="#" id="nav-stories-btn" data-i18n="nav.stories">æ•…äº‹</a>
    <a class="chip" href="#" id="nav-about-btn" data-i18n="nav.about">å…³äºæˆ‘ä»¬</a>
    <div class="row">
      <select id="layoutSelect" class="chip" title="Layout">
        <option value="mobile">ğŸ“± Mobile</option>
        <option value="desktop">ğŸ–¥ï¸ Desktop</option>
      </select>
      <select id="langSelect" class="chip" title="Language">
        <option value="en">EN</option>
        <option value="zh">ä¸­æ–‡</option>
        <option value="ja">æ—¥æœ¬èª</option>
        <option value="ko">í•œêµ­ì–´</option>
      </select>
    </div>
  </div>
</header>

<!-- HOME HERO (Step 1) -->
<section id="home-hero" class="section active">
  <div class="hero">
    <div class="h1" data-i18n="hero.title">å˜é‡é“ Â· å¿ƒç†è‡ªæ•‘</div>
    <p class="lead" data-i18n="hero.subtitle1">ä»–ä»¬ç»™ä½ æ•…äº‹ï¼Œä½ åªè¢«åˆ†é…åˆ°è§’è‰²ã€‚æˆ‘ä»¬ç»™ä½ ç¬”ã€‚</p>
    <p class="lead" data-i18n="hero.subtitle2">æ€ç»´è¿›åŒ–ï¼Œä¸é€ƒé¿ä¸å¦„æƒ³â€”â€”æŠŠç°å®å½“ç´ ææ¥ä¹¦å†™ã€‚ä»æ­¤ï¼Œæ•…äº‹å¬ä½ çš„ã€‚</p>
    <div style="height:14px"></div>
    <button id="startBtn" class="btn">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M12 19l7-7 3 3-7 7-3-1z" stroke-width="1.5"/>
        <path d="M3 21l6-2 11-11-4-4L5 15 3 21z" stroke-width="1.5"/>
      </svg>
      <span data-i18n="hero.cta">æˆ‘æ¥æ‰§ç¬”</span>
    </button>
    <div class="note" style="margin-top:10px" data-i18n="hero.note">ç‚¹å‡»ä¸Šé¢çš„â€œç¬”â€æŒ‰é’®è¿›å…¥ä¸‹ä¸€æ­¥ã€‚å¯éšæ—¶ç”¨é¡¶éƒ¨å¯¼èˆªè¿”å›ã€‚</div>
  </div>
</section>

<!-- HOME CARDS (Step 2) -->
<section id="home-cards" class="section">
  <div class="panel">
    <div class="h1" data-i18n="cards.title">çœ‹åˆ°å“ªæ¡è®©ä½ æƒ³çˆ†ç²—å£ï¼Œå°±ç‚¹å®ƒã€‚</div>
    <div class="cards" id="cardsList">
      <!-- Card items are injected by JS from content data -->
    </div>
  </div>
  <!-- Detail view -->
  <div class="panel detail" id="detailView">
    <div class="back"><button id="backToCards">ğŸ”™ <span data-i18n="cards.back">è¿”å›é€‰å¡</span></button></div>
    <div id="detailContent" class="card long"></div>
  </div>
</section>

<!-- STORIES -->
<section id="stories" class="section">
  <div class="panel">
    <div class="card">
      <h3 data-i18n="stories.title">æ•…äº‹</h3>
      <p data-i18n="stories.wip">å†…å®¹æ­£åœ¨æ­å»ºä¸­ï¼Œæ•¬è¯·æœŸå¾…ã€‚</p>
    </div>
  </div>
</section>

<!-- ABOUT -->
<section id="about" class="section">
  <div class="panel">
    <div class="cards" id="aboutCards"></div>
  </div>
  <div class="panel">
    <div class="card">
      <h4 data-i18n="about.statement.title">å£°æ˜ï¼šæˆ‘ä»¬çš„æ‰¿è¯ºä¸ç•Œçº¿</h4>
      <ul class="long">
        <li data-i18n="about.statement.li1">æˆ‘ä»¬ä¸ä¿è¯å¥‡è¿¹ã€‚æˆ‘ä»¬æ‰¿è¯ºæä¾›å¯éªŒè¯çš„æ•…äº‹è®­ç»ƒã€èŒƒä¾‹ä¸ç¤¾åŒºå®éªŒã€‚</li>
        <li data-i18n="about.statement.li2">æˆ‘ä»¬åå¯¹æ“æ§ä¸å‰¥å‰Šã€‚ä»»ä½•è¦æ±‚ä½ æ–­ç»å¤–éƒ¨è”ç³»ã€å°†æ‰€æœ‰å†³ç­–äº¤ç»™æŸäººæˆ–è¦æ±‚é«˜é¢â€œçŒ®é‡‘â€çš„ç»„ç»‡ï¼Œä¸æ˜¯æˆ‘ä»¬çš„ç›Ÿå‹ã€‚</li>
        <li data-i18n="about.statement.li3">è‹¥ä½ å¤„äºç²¾ç¥å±æœºï¼Œè¯·å…ˆæ±‚åŒ»ã€‚æœ¬ä½“ç³»ä¸æ˜¯åŒ»ç–—æ›¿ä»£ã€‚è‹¥æœ‰è‡ªä¼¤/è‡ªæ€å¿µå¤´ï¼Œè¯·ç«‹å³è”ç³»ä¸“ä¸šæœºæ„æˆ–å±æœºçƒ­çº¿ã€‚</li>
      </ul>
      <p class="muted">Email: <a href="mailto:notpreset@outlook.com">notpreset@outlook.com</a></p>
    </div>
  </div>
</section>

<footer>
  <div class="footer-wrap">
    <div class="muted foot-note" data-i18n="footer.copy">Â© 2025 å˜é‡é“ Â· è®©ä¸–ç•Œæˆä¸ºå¯ä¹¦å†™çš„ç´ æã€‚</div>
  </div>
</footer>

<div id="toast"></div>

<script>
/* ========= i18n ========= */
const I18N = {
  en: {
    "nav.home":"Home",
    "nav.stories":"Stories",
    "nav.about":"About",
    "hero.title":"Variable Dao Â· Selfâ€‘Rescue by Story",
    "hero.subtitle1":"They hand you a story and assign you a role. We hand you the pen.",
    "hero.subtitle2":"Evolve your thinkingâ€”no escapism, no delusion. Write with reality as your material. From now on, the story listens to you.",
    "hero.cta":"Take the Pen",
    "hero.note":"Click the pen to continue. Use the top nav anytime.",
    "cards.title":"Tap the line that makes you want to swear.",
    "cards.back":"Back to cards",
    "stories.title":"Stories",
    "stories.wip":"This section is under construction. Please stay tuned.",
    "about.statement.title":"Statement: Our Commitments & Boundaries",
    "about.statement.li1":"We do not promise miracles. We promise verifiable drills, exemplars, and community experiments.",
    "about.statement.li2":"We oppose manipulation and exploitation. Any group that isolates you, centralizes all decisions, or demands heavy 'donations' is not our ally.",
    "about.statement.li3":"If you are in crisis, seek medical help first. This is not a substitute for treatment. If you have selfâ€‘harm or suicidal thoughts, contact professional help immediately.",
    "footer.copy":"Â© 2025 Variable Dao Â· Make the world writable."
  },
  zh: {
    "nav.home":"é¦–é¡µ",
    "nav.stories":"æ•…äº‹",
    "nav.about":"å…³äºæˆ‘ä»¬",
    "hero.title":"å˜é‡é“ Â· å¿ƒç†è‡ªæ•‘",
    "hero.subtitle1":"ä»–ä»¬ç»™ä½ æ•…äº‹ï¼Œä½ åªè¢«åˆ†é…åˆ°è§’è‰²ã€‚æˆ‘ä»¬ç»™ä½ ç¬”ã€‚",
    "hero.subtitle2":"æ€ç»´è¿›åŒ–ï¼Œä¸é€ƒé¿ä¸å¦„æƒ³â€”â€”æŠŠç°å®å½“ç´ ææ¥ä¹¦å†™ã€‚ä»æ­¤ï¼Œæ•…äº‹å¬ä½ çš„ã€‚",
    "hero.cta":"æˆ‘æ¥æ‰§ç¬”",
    "hero.note":"ç‚¹å‡»ä¸Šé¢çš„â€œç¬”â€æŒ‰é’®è¿›å…¥ä¸‹ä¸€æ­¥ã€‚å¯éšæ—¶ç”¨é¡¶éƒ¨å¯¼èˆªè¿”å›ã€‚",
    "cards.title":"çœ‹åˆ°å“ªæ¡è®©ä½ æƒ³çˆ†ç²—å£ï¼Œå°±ç‚¹å®ƒã€‚",
    "cards.back":"è¿”å›é€‰å¡",
    "stories.title":"æ•…äº‹",
    "stories.wip":"å†…å®¹æ­£åœ¨æ­å»ºä¸­ï¼Œæ•¬è¯·æœŸå¾…ã€‚",
    "about.statement.title":"å£°æ˜ï¼šæˆ‘ä»¬çš„æ‰¿è¯ºä¸ç•Œçº¿",
    "about.statement.li1":"æˆ‘ä»¬ä¸ä¿è¯å¥‡è¿¹ã€‚æˆ‘ä»¬æ‰¿è¯ºæä¾›å¯éªŒè¯çš„æ•…äº‹è®­ç»ƒã€èŒƒä¾‹ä¸ç¤¾åŒºå®éªŒã€‚",
    "about.statement.li2":"æˆ‘ä»¬åå¯¹æ“æ§ä¸å‰¥å‰Šã€‚ä»»ä½•è¦æ±‚ä½ æ–­ç»å¤–éƒ¨è”ç³»ã€å°†æ‰€æœ‰å†³ç­–äº¤ç»™æŸäººæˆ–è¦æ±‚é«˜é¢â€œçŒ®é‡‘â€çš„ç»„ç»‡ï¼Œä¸æ˜¯æˆ‘ä»¬çš„ç›Ÿå‹ã€‚",
    "about.statement.li3":"è‹¥ä½ å¤„äºç²¾ç¥å±æœºï¼Œè¯·å…ˆæ±‚åŒ»ã€‚æœ¬ä½“ç³»ä¸æ˜¯åŒ»ç–—æ›¿ä»£ã€‚è‹¥æœ‰è‡ªä¼¤/è‡ªæ€å¿µå¤´ï¼Œè¯·ç«‹å³è”ç³»ä¸“ä¸šæœºæ„æˆ–å±æœºçƒ­çº¿ã€‚",
    "footer.copy":"Â© 2025 å˜é‡é“ Â· è®©ä¸–ç•Œæˆä¸ºå¯ä¹¦å†™çš„ç´ æã€‚"
  },
  ja: {
    "nav.home":"ãƒ›ãƒ¼ãƒ ",
    "nav.stories":"ã‚¹ãƒˆãƒ¼ãƒªãƒ¼",
    "nav.about":"ç§ãŸã¡ã«ã¤ã„ã¦",
    "hero.title":"å¤‰æ•°é“ Â· ç‰©èªã§è‡ªã‚‰ã‚’æ•‘ã†",
    "hero.subtitle1":"ä¸–ç•Œã¯ã‚ãªãŸã«å½¹ã‚’å‰²ã‚ŠæŒ¯ã‚‹ã€‚ç§ãŸã¡ã¯â€œãƒšãƒ³â€ã‚’æ¸¡ã™ã€‚",
    "hero.subtitle2":"é€ƒé¿ã‚‚å¦„æƒ³ã‚‚ã›ãšã€ç¾å®Ÿã‚’ç´ æã«æ›¸ãã€‚ã“ã‚Œã‹ã‚‰ã¯ã€ç‰©èªã¯ã‚ãªãŸã«å¾“ã†ã€‚",
    "hero.cta":"ãƒšãƒ³ã‚’å–ã‚‹",
    "hero.note":"ä¸Šã®ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã—ã¦é€²ã‚€ã€‚ä¸Šéƒ¨ãƒŠãƒ“ã§ã„ã¤ã§ã‚‚æˆ»ã‚Œã¾ã™ã€‚",
    "cards.title":"èƒ¸ã«åˆºã•ã‚‹ã‚‚ã®ã‚’ã‚¿ãƒƒãƒ—ã€‚",
    "cards.back":"ã‚«ãƒ¼ãƒ‰ã¸æˆ»ã‚‹",
    "stories.title":"ã‚¹ãƒˆãƒ¼ãƒªãƒ¼",
    "stories.wip":"æº–å‚™ä¸­ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚",
    "about.statement.title":"å£°æ˜ï¼šç§ãŸã¡ã®ç´„æŸã¨å¢ƒç•Œ",
    "about.statement.li1":"å¥‡è·¡ã¯ç´„æŸã—ã¾ã›ã‚“ã€‚æ¤œè¨¼å¯èƒ½ãªç·´ç¿’ãƒ»å®Ÿä¾‹ãƒ»å®Ÿé¨“ã‚’æä¾›ã—ã¾ã™ã€‚",
    "about.statement.li2":"æ“ä½œã¨æ¾å–ã«åå¯¾ã—ã¾ã™ã€‚éš”é›¢ã‚„é«˜é¡â€œçŒ®é‡‘â€ã‚’è¿«ã‚‹å›£ä½“ã¯åŒç›Ÿã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚",
    "about.statement.li3":"ç²¾ç¥çš„å±æ©Ÿã®éš›ã¯åŒ»ç™‚æ©Ÿé–¢ã¸ã€‚æœ¬ä½“ç³»ã¯æ²»ç™‚ã®ä»£æ›¿ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚",
    "footer.copy":"Â© 2025 å¤‰æ•°é“ Â· ä¸–ç•Œã‚’â€œæ›¸ã‘ã‚‹â€ã‚‚ã®ã«ã€‚"
  },
  ko: {
    "nav.home":"í™ˆ",
    "nav.stories":"ìŠ¤í† ë¦¬",
    "nav.about":"ì†Œê°œ",
    "hero.title":"ë³€ìˆ˜ë„ Â· ì´ì•¼ê¸°ë¡œ ìŠ¤ìŠ¤ë¡œë¥¼ êµ¬í•˜ê¸°",
    "hero.subtitle1":"ì„¸ìƒì€ ì—­í• ì„ ë°°ì •í•œë‹¤. ìš°ë¦¬ëŠ” â€˜íœâ€™ì„ ê±´ë„¨ë‹¤.",
    "hero.subtitle2":"ë„í”¼ë„ ë§ìƒë„ ì—†ì´, í˜„ì‹¤ë¡œ ì“°ë¼. ì´ì œë¶€í„° ì´ì•¼ê¸°ëŠ” ë‹¹ì‹ ì˜ ê²ƒì´ë‹¤.",
    "hero.cta":"íœì„ ë“¤ê¸°",
    "hero.note":"ìœ„ ë²„íŠ¼ì„ ëˆŒëŸ¬ ë‹¤ìŒìœ¼ë¡œ. ìƒë‹¨ ë©”ë‰´ë¡œ ì–¸ì œë“  ëŒì•„ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    "cards.title":"ìš•ì´ íŠ€ì–´ë‚˜ì˜¬ ê·¸ ë¬¸ì¥ì„ íƒ­í•˜ì„¸ìš”.",
    "cards.back":"ì¹´ë“œë¡œ ëŒì•„ê°€ê¸°",
    "stories.title":"ìŠ¤í† ë¦¬",
    "stories.wip":"ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.",
    "about.statement.title":"ì„±ëª…: ìš°ë¦¬ì˜ ì•½ì†ê³¼ ê²½ê³„",
    "about.statement.li1":"ê¸°ì ì„ ì•½ì†í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê²€ì¦ ê°€ëŠ¥í•œ í›ˆë ¨Â·ì‚¬ë¡€Â·ì‹¤í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.",
    "about.statement.li2":"ì¡°ì‘ê³¼ ì°©ì·¨ì— ë°˜ëŒ€í•©ë‹ˆë‹¤. ê³ ë¦½ì„ ê°•ìš”í•˜ê±°ë‚˜ ê±°ì•¡ì˜ â€˜í—Œê¸ˆâ€™ì„ ìš”êµ¬í•˜ëŠ” ì¡°ì§ì€ ë™ë§¹ì´ ì•„ë‹™ë‹ˆë‹¤.",
    "about.statement.li3":"ìœ„ê¸° ì‹œì—ëŠ” ë¨¼ì € ì˜ë£Œê¸°ê´€ì— ì—°ë½í•˜ì„¸ìš”. ë³¸ ì²´ê³„ëŠ” ì¹˜ë£Œì˜ ëŒ€ì²´ê°€ ì•„ë‹™ë‹ˆë‹¤.",
    "footer.copy":"Â© 2025 ë³€ìˆ˜ë„ Â· ì„¸ìƒì„ â€˜ì“¸ ìˆ˜ ìˆê²Œâ€™."
  }
};

function t(key){
  const lang = state.lang;
  const dict = I18N[lang] || I18N['en'];
  return dict[key] || (I18N['zh'][key] || key);
}

/* ========= Content (ZH source; UI translated; contentå¯åç»­è¡¥å……å¤šè¯­) ========= */
const CARDS = [
  {
    key:"air",
    title:"å½“ç©ºæ°”",
    sting:"æˆ‘åœ¨ï¼Œä½ ä»¬å½“æ²¡çœ‹è§ã€‚",
    ask:"è°æŠŠæˆ‘å½“é€æ˜äººï¼Ÿ",
    body:`<p><b>çŸ­ç¯‡ï½œã€Šä¸¤ä¸ªäººå½±ã€‹</b></p>
<p>åŒä¸€é—´æ•™å®¤é‡Œï¼Œæœ‰ä¸¤ä¸ªäººå½±ï¼šA å’Œ Bã€‚è€å¸ˆç‚¹åè€æ¼ã€åˆ†ç»„æ²¡äººå–Šã€ä¸¾æ‰‹æ²¡äººçœ‹â€”â€”ä»–ä»¬éƒ½åƒç©ºæ°”ã€‚é»‘æ¿æ“¦è¿‡ä¸€éåˆä¸€éï¼Œä»–ä»¬çš„åå­—ä¸€æ¬¡ä¹Ÿæ²¡ç•™ä¸‹ã€‚</p>
<p>A çš„æ•…äº‹è¿™æ ·å†™ï¼š<br>
â€œä¹–ä¸€ç‚¹ï¼Œä¸æ·»éº»çƒ¦ï¼›ç”¨æˆç»©è¯´è¯ï¼›æ€»æœ‰ä¸€å¤©ä¼šè¢«çœ‹åˆ°ã€‚â€<br>
äºæ˜¯ä»–æ›´å®‰é™ï¼Œåå¾—æ›´ç›´ã€‚ä¸€ä¸ªæœˆåï¼Œä»–å¼€å§‹æ€€ç–‘ï¼šæ˜¯ä¸æ˜¯æˆ‘çœŸçš„ä¸é‡è¦ã€‚ä»–æ²¡é”™â€”â€”å®‰é™ã€ç¤¼è²Œã€å…‹åˆ¶éƒ½å¯¹ï¼›ä½†ä»–çš„ç”Ÿå‘½åƒè¢«æŒ‰äº†é™éŸ³é”®ï¼Œç¯æ°¸è¿œä¸ä¼šä¸»åŠ¨æ‰“åˆ°ä»–èº«ä¸Šã€‚</p>
<p>B çš„æ•…äº‹æ˜¯å¦ä¸€ä¸ªç‰ˆæœ¬ï¼š<br>
â€œæ—¢ç„¶æ²¡äººçœ‹è§ï¼Œé‚£æˆ‘å…ˆè®©ä¸–ç•Œå¬åˆ°ä¸€å£°å“ã€‚â€<br>
åšå¹¿æ’­ä½“æ“æ—¶ï¼Œä»–æ•…æ„æ…¢åŠæ‹æˆ–å¤¸å¼ åœ°åšé”™åŠ¨ä½œï¼Œå¼•å¾—æ—è¾¹çš„åŒå­¦ç¬‘åœºï¼›ä»–ä¼šå»å¹¿æ’­ç«™æŠŠç­çº§çƒèµ›å‰ªäº†æ®µâ€œå‡æ­£ç»è§£è¯´â€åœ¨ä¸‹è¯¾æ—¶ç”¨æ•™å­¦è®¾å¤‡æ”¾æ˜ ï¼Œå¹´çº§ä¸»ä»»çš±çœ‰ï¼šâ€œåˆ«é—¹ã€‚â€ä½†å…¨ç­å¼€å§‹å«ä»–â€œè§£è¯´å‘˜â€ã€‚</p>
<p><b>å˜é‡é“ Â· é“éª¨</b><br>ğŸ¦´ç¡®è®¤æ„Ÿï¼ˆI exist for someoneï¼‰</p>
<p><b>å˜é‡é“ Â· é“è¯</b><br>â€¢ A ç­‰è§’è‰²ï¼›â€¢ B ä¸¢ä¸‹è®°å·ã€‚</p>
<p><b>å˜é‡é“ Â· è§‰æ‚Ÿ</b><br>è¢«çœ‹è§ï¼Œæ˜¯äººç±»çš„åº•å±‚ç‡ƒæ–™ã€‚ä»â€œç©ºæ°”â€åˆ°â€œè¢«å«åˆ°åå­—â€ï¼Œæ–°çš„æ•…äº‹å°±å¼€å§‹äº†ã€‚</p>`
  },
  {
    key:"not-only",
    title:"ä¸æ˜¯å”¯ä¸€",
    sting:"æ°¸è¿œå€™è¡¥ï¼Œä»æ²¡è¢«åçˆ±ã€‚",
    ask:"åœ¨å“ªæ®µå…³ç³»é‡Œï¼Œæˆ‘å¯æ›¿ä»£åˆ°å¯ç¬‘ï¼Ÿ",
    body:`<p><b>A.æ¡ˆä¾‹ï½œã€Šå“ˆæ´›å°çŒ´å­å®éªŒã€‹</b></p>
<p>â€¦â€¦ï¼ˆç•¥è¿°å®éªŒä¸â€œç‹¬ä¸€æ„Ÿâ€ï¼‰</p>
<p><b>B.çŸ­ç¯‡ï½œã€Šå°èˆŸçš„ç”Ÿæ—¥ã€‹</b></p>
<p>â€¦â€¦ï¼ˆå†™ä¸‹â€œä¸“å±ä¸€ç¬”â€ï¼‰</p>
<p><b>å˜é‡é“ Â· é“éª¨</b><br>ğŸ¦´ åå¿ƒæ„Ÿï¼ˆI matter more than averageï¼‰</p>
<p><b>å˜é‡é“ Â· é“è¯</b> â€¢ æ¥å—â€œå¹³ç­‰â€ä¸åœ¨å¹³ç­‰é‡Œåˆ»çº¿ã€‚</p>
<p><b>å˜é‡é“ Â· è§‰æ‚Ÿ</b><br>å…¬å¹³æ˜¯å®‰å…¨å¸¦ï¼Œåå¿ƒæ˜¯ç‡ƒæ–™ã€‚è‹¥åˆ«äººä¸ç»™å”¯ä¸€ï¼Œå°±è‡ªå·±åˆ»ä¸€ä¸ªã€‚</p>`
  },
  {
    key:"no-reply",
    title:"çŸ³æ²‰å¤§æµ·",
    sting:"è¯´ç ´å–‰å’™ï¼Œä¹Ÿæ²¡äººå›ã€‚",
    ask:"æˆ‘æœ€è¿‘ä¸€æ¬¡â€œè¢«å·²è¯»ä¸å›â€æ˜¯ä»€ä¹ˆäº‹ï¼Ÿ",
    body:`<p><b>A.ç°å®æ¡ˆä¾‹ï½œã€Šè¢«å·²è¯»ä¸å›çš„æ¯äº²ã€‹</b></p>
<p>â€¦â€¦è´£ä»»åˆ†æ•£æ•ˆåº”â€¦â€¦</p>
<p><b>B.å˜é‡é“äººç‰©ï½œã€Šé˜¿æ˜Šçš„ä¸‰ç§’é’Ÿã€‹</b></p>
<p>â€¦â€¦æŠŠæ²‰é»˜å˜æˆå€’è®¡æ—¶èˆå°â€¦â€¦</p>
<p><b>å˜é‡é“ Â· é“éª¨</b><br>ğŸ¦´ å›å£°æ„Ÿï¼ˆI get an echoï¼‰</p>
<p><b>å˜é‡é“ Â· é“è¯</b> â€¢ ç­‰ vs é€ åœºã€‚</p>
<p><b>å˜é‡é“ Â· è§‰æ‚Ÿ</b><br>å›å£°ä¸æ˜¯å¤©èµï¼Œè€Œæ˜¯ä½ ç»™ä¸–ç•Œä¸€ä¸ªâ€œå¿…é¡»å“çš„æ—¶åˆ»â€ã€‚</p>`
  },
  {
    key:"background",
    title:"æ´»æˆèƒŒæ™¯",
    sting:"æˆ‘çš„äººç”Ÿåƒåˆ«äººçš„é…è§’ã€‚",
    ask:"æˆ‘åœ¨è¿‡è°å†™çš„æ•…äº‹ï¼Ÿ",
    body:`<p><b>A.ç°å®æ¡ˆä¾‹ï½œã€Šå©šç¤¼ä¸Šçš„ä¼´å¨˜ã€‹</b></p>
<p>â€¦â€¦æ²¡æœ‰ä¸€ä¸ªå­—æåˆ°è‡ªå·±â€¦â€¦</p>
<p><b>B.å˜é‡é“äººç‰©ï½œã€Šè§è¯è€…çš„ä¸»è§’ã€‹</b></p>
<p>â€¦â€¦â€œè§è¯ä¹Ÿæ˜¯ä¸»è§’â€â€¦â€¦</p>
<p><b>å˜é‡é“ Â· é“éª¨</b><br>ğŸ¦´ å™äº‹æ„Ÿï¼ˆMy life is a storyï¼‰</p>
<p><b>å˜é‡é“ Â· é“è¯</b> â€¢ é…è§’ä½ç½®çš„è½¬åŒ–ã€‚</p>
<p><b>å˜é‡é“ Â· è§‰æ‚Ÿ</b><br>å†™è‡ªå·±çš„å™äº‹ï¼Œè™šæ— è¢«æ”¹å†™æˆç« èŠ‚ã€‚</p>`
  },
  {
    key:"puppet",
    title:"è¢«äººæ‘†å¸ƒ",
    sting:"æˆ‘åšçš„ä¸€åˆ‡éƒ½åƒè¢«æ“æ§ã€‚",
    ask:"åˆ°åº•æ˜¯è°åœ¨æ›¿æˆ‘åšå†³å®šï¼Ÿ",
    body:`<p><b>A.ç°å®æ¡ˆä¾‹ï½œã€Šè¢«å‰¥å¤ºçš„å¿—æ„¿ã€‹</b></p>
<p>â€¦â€¦â€œå¸ˆèŒƒç¨³å®šâ€ä¸æ— å‘è¨€æƒâ€¦â€¦</p>
<p><b>B.å˜é‡é“äººç‰©ï½œã€Šå†™å›è‡ªå·±çš„é•œå¤´ã€‹</b></p>
<p>â€¦â€¦ç”¨å¯¼æ¼”æ€ç»´åå‡»ï¼Œç—…å†å¤‡æ³¨â€œä¸ºä½œå“å–æâ€ã€‚</p>
<p><b>å˜é‡é“ Â· é“éª¨</b><br>ğŸ¦´ æŒæ§æ„Ÿï¼ˆI can influence outcomesï¼‰</p>
<p><b>å˜é‡é“ Â· é“è¯</b> â€¢ å…¨å±€æœªå˜ï¼Œæ’å…¥ç½²åã€‚</p>
<p><b>å˜é‡é“ Â· è§‰æ‚Ÿ</b><br>åœ¨å‰§æœ¬é‡Œæ’å…¥ä½ çš„ä¸€å¸§ï¼Œè¯æ˜â€œæˆ‘å†™è¿‡â€ã€‚</p>`
  },
  {
    key:"redundant",
    title:"å¤šä½™ä¹‹äºº",
    sting:"å·¥ä½œæ²¡äººéœ€è¦æˆ‘ï¼Œå›å®¶ä¹Ÿä¸€æ ·ã€‚",
    ask:"æˆ‘åœ¨å“ªä»¶äº‹ä¸Šæœ€è¢«å½“â€œå¯æœ‰å¯æ— â€ï¼Ÿ",
    body:`<p><b>çŸ­ç¯‡ï½œã€Šç‚‰ç«æ—çš„èº«å½±ã€‹</b></p>
<p>â€¦â€¦â€œç«å€™å¸ˆâ€çš„é€†è¢­â€¦â€¦</p>
<p><b>å˜é‡é“ Â· é“éª¨</b><br>ğŸ”¥ ä»·å€¼æ„Ÿï¼ˆI am useful / valuableï¼‰</p>
<p><b>å˜é‡é“ Â· é“è¯</b> â€¢ è§’è½é‡Œç‚¹äº®ä½ çš„å…‰ã€‚</p>
<p><b>å˜é‡é“ Â· è§‰æ‚Ÿ</b><br>ç«å› ä½ è€Œç¨³ï¼Œç‚‰å› ä½ è€Œæˆâ€”â€”å­˜åœ¨çš„è¯æ˜ã€‚</p>`
  },
  {
    key:"no-tribe",
    title:"æ— å®¶å¯å½’",
    sting:"ä»–ä»¬æœ‰åœˆå­ï¼Œæˆ‘åªæœ‰é—¨å¤–ã€‚",
    ask:"æˆ‘æœ¬è¯¥å±äºé‚£é‡Œï¼Œå´ä¸€ç›´åœ¨é—¨å£ï¼Ÿ",
    body:`<p><b>çŸ­ç¯‡ï½œã€Šé€å¾’ã€‹</b></p>
<p>â€¦â€¦â€œæˆ‘ä»¬æ˜¯å½¼æ­¤çš„é å±±â€ã€‚</p>
<p><b>å˜é‡é“ Â· é“éª¨</b><br>ğŸ¤ å½’å±æ„Ÿï¼ˆI am part of a tribeï¼‰</p>
<p><b>å˜é‡é“ Â· é“è¯</b> â€¢ å­¤ç«‹ä¹…äº†ï¼Œç–¯ï¼›å­¤ç«‹ä¹…äº†ï¼Œåˆ›ã€‚</p>
<p><b>å˜é‡é“ Â· è§‰æ‚Ÿ</b><br>ä¸ºâ€œå®¶â€ç«‹ä¸‹æ•…äº‹ï¼Œç¯ç«å³é—¨ã€‚</p>`
  },
  {
    key:"void",
    title:"èµ°è¿›è™šæ— ",
    sting:"è¶ŠåŠªåŠ›è¶Šè¿·èŒ«ã€‚",
    ask:"æˆ‘ç°åœ¨åˆ°åº•åœ¨å‘å“ªé‡Œæ¨è¿›ï¼Ÿ",
    body:`<p><b>çŸ­ç¯‡ï½œã€Šé—è¿¹ã€‹</b></p>
<p>â€¦â€¦çŸ³ç¢‘â€œè™šæ— â€ï¼Œåˆ»ä¸‹â€œæˆ‘ä»¬åœ¨æ­¤å­˜åœ¨â€ã€‚</p>
<p><b>å˜é‡é“ Â· é“éª¨</b><br>ğŸ›°ï¸ æ–¹å‘æ„Ÿï¼ˆI am going somewhereï¼‰</p>
<p><b>å˜é‡é“ Â· é“è¯</b> â€¢ ç»ˆç‚¹æ”¹å†™æˆåºç« ã€‚</p>
<p><b>å˜é‡é“ Â· è§‰æ‚Ÿ</b><br>æ–¹å‘ä¸æ˜¯å¤–é¢ç»™çš„ã€‚</p>`
  },
  {
    key:"no-light",
    title:"æ—¥å­æ²¡å…‰",
    sting:"æ¯å¤©éƒ½åƒå¤å°ï¼Œæ¯«æ— ä»ªå¼ã€‚",
    ask:"ä»Šå¤©æœ‰ä»€ä¹ˆå€¼å¾—è®©æˆ‘åœä¸€ä¸‹ï¼Ÿ",
    body:`<p><b>çŸ­ç¯‡ï½œã€Šå°¼ç½—æ²³ä¹‹å¤œã€‹</b></p>
<p>â€¦â€¦ç‚¹ç¯ã€çŒ®è°·ï¼Œç»™æ—¥å¸¸ä»¥æ•¬æ„â€¦â€¦</p>
<p><b>å˜é‡é“ Â· é“éª¨</b><br>âœ¨ ä»ªå¼æ„Ÿï¼ˆThis moment is sacredï¼‰</p>
<p><b>å˜é‡é“ Â· é“è¯</b> â€¢ é€‰æ‹©çš„ç‚¹äº®ã€‚</p>
<p><b>å˜é‡é“ Â· è§‰æ‚Ÿ</b><br>å…‰è¦äººç‚¹ç‡ƒã€‚</p>`
  },
  {
    key:"dust",
    title:"åªæ˜¯ä¸€ç²’å°˜",
    sting:"ä¸–ç•Œæ»šæ»šå‘å‰ï¼Œæ²¡æˆ‘ä¹Ÿä¸€æ ·ã€‚",
    ask:"æˆ‘å’Œæ›´å¤§çš„ä¸œè¥¿è¿˜æœ‰è¿æ¥å—ï¼Ÿ",
    body:`<p><b>ç³»ç»Ÿæ–‡ï½œã€Šæ— æ•Œä¹‹åã€‹</b></p>
<p>â€¦â€¦ä»â€œä¸ºèƒœè´Ÿâ€åˆ°â€œä¸ºå®ˆæŠ¤â€ã€‚</p>
<p><b>å˜é‡é“ Â· é“éª¨</b><br>ğŸŒŒ è¶…è¶Šæ„Ÿï¼ˆI touch something greaterï¼‰</p>
<p><b>å˜é‡é“ Â· é“è¯</b> â€¢ æŠŠåŠ›é‡å†™è¿›ç¾¤ä½“çš„æ•…äº‹ã€‚</p>
<p><b>å˜é‡é“ Â· è§‰æ‚Ÿ</b><br>ç³»ç»Ÿä¼šè¿‡æœŸï¼Œæ•…äº‹ä¼šæµä¼ ã€‚</p>`
  }
];

/* ABOUT cards content (condensed per user's outline) */
const ABOUT = [
  {
    title:"æˆ‘ä»¬çš„ç«‹åœº",
    body:`<p>å˜é‡é“æ˜¯ä¸€å¥—åŸºäºâ€œè®²æ•…äº‹â€çš„å¿ƒç†è‡ªæ•‘ä¿®è¡Œæ³•ï¼šä½ ä¼šé‡æ–°è·å¾—å™äº‹æ„Ÿã€æŒæ§æ„Ÿã€è¿æ¥æ„Ÿã€‚</p>
    <ul class="long">
      <li>æˆ‘ä»¬åå¯¹ç©ºæ´çš„å¹»è§‰ï¼Œå´å…è®¸ä½ ç”¨å™äº‹è®©ç°å®å˜å¾—å¯ä»¥å¿å—ã€‚</li>
      <li>æˆ‘ä»¬ä¸ä¿è¯å¥‡è¿¹ï¼Œä½†æˆ‘ä»¬ä¿è¯ï¼šä½ ä¸ä¼šå†æ˜¯â€œåˆ«äººå†™çš„è§’è‰²â€ï¼Œä½ ä¼šå­¦ä¼šæ‹¿ç¬”ã€‚</li>
    </ul>
    <p>å˜é‡é“ä¸æ˜¯å¿ƒç†å­¦çš„å†åŒ…è£…ï¼Œä¹Ÿä¸æ˜¯é¸¡æ±¤ã€‚å®ƒæ˜¯ä¸€ç§ä¿®è¡Œæ–¹å¼ï¼šåœ¨ä¸–ç•Œæ˜¯æ•…äº‹çš„å‰æä¸‹ï¼Œå­¦ä¼šè‡ªå·±æ‰§ç¬”ã€‚</p>`
  },
  {
    title:"æ ¸å¿ƒï¼šä¸æ˜¯è®¤çŸ¥ç–—æ³•ï¼Œæ˜¯â€œå†™æ•…äº‹ä¸ºä¸»â€çš„ä¿®è¡Œ",
    body:`<ul class="long">
      <li>ä¸–ç•Œå¹¶éå•ä¸€äº‹å®æµï¼Œè€Œæ˜¯ç”±å™äº‹æ„æˆã€‚</li>
      <li>æˆä¸ºä½œè€…ï¼šè®¾å®šèº«ä»½/ç›®æ ‡/è·¯çº¿ï¼Œå¹¶æ‰¿æ‹…éªŒè¯ä¹‰åŠ¡ã€‚</li>
    </ul>`
  },
  {
    title:"å¦‚ä½•åˆ†è¾¨ã€Œæ•…äº‹ / å¦„æƒ³ / éª—å±€ã€",
    body:`<ol class="long">
      <li>å¯æ£€éªŒæ€§ï¼ˆReality anchorï¼‰</li>
      <li>å¤–éƒ¨å›å£°ï¼ˆEcho testï¼‰</li>
      <li>å¯æ”¾å¤§æ€§ï¼ˆReplicabilityï¼‰</li>
      <li>åˆ©ä»–/ç§åˆ©æ¯”ï¼ˆBenefit balanceï¼‰</li>
      <li>æ—¶é—´è€å—æ€§ï¼ˆTime testï¼‰</li>
      <li>é£é™©ç•Œçº¿ï¼ˆHarm thresholdï¼‰</li>
    </ol>`
  },
  {
    title:"æ€ä¹ˆå¼€å§‹ï¼ˆé©¬ä¸Šèƒ½è¯•çš„å‡ ä¸ªå®éªŒï¼‰",
    body:`<ol class="long">
      <li>åˆºå¥æ‹†è§£ï¼šåœ¨åˆºç—›è¯ååŠ â€œè¿™æ˜¯ä»–ä»¬å†™çš„ï¼Œä¸æ˜¯æˆ‘å†™çš„â€ã€‚</li>
      <li>èˆå°åŠ¨ä½œï¼šå¿ƒé‡Œç»™è‡ªå·±æŠ¥å¹•ã€‚</li>
      <li>é€†å†™æ ‡ç­¾ï¼šæŠŠâ€œé€æ˜äººâ€æ”¹å†™æˆâ€œè§è¯äººâ€ã€‚</li>
      <li>ä¸€åˆ†é’Ÿå†™æ•…äº‹ï¼šå¡«ç©ºå†™ä¸€è¡Œå¼€å¤´ã€‚</li>
    </ol>`
  },
  {
    title:"å‘èµ·äººä»‹ç»",
    body:`<p><b>ğŸ§˜ğŸ»é“å· Â· éšå¢¨å­</b> â€”â€” éšåŒ¿ä»¥æŠ¤æ–¹æ³•ä¹‹çº¯ã€‚</p>
    <p><b>ğŸ§˜ğŸ»é“å· Â· é’éšå®¢</b> â€”â€” â€œä¸–ç•Œå­˜åœ¨ï¼Œå› ä¸ºæˆ‘åœ¨å†™â€ã€‚</p>`
  }
];

/* ========= State & helpers ========= */
const state = {
  lang: 'en',
  layout: 'mobile',
  currentSection: 'home-hero',
  previousSection: null
};

function detectLang(){
  const url = new URL(location.href);
  const fromUrl = url.searchParams.get('lang');
  const saved = localStorage.getItem('vd_lang');
  const nav = (navigator.language||'en').slice(0,2);
  return (fromUrl || saved || nav || 'en');
}
function detectLayout(){
  const url = new URL(location.href);
  const q = url.searchParams.get('layout');
  const saved = localStorage.getItem('vd_layout');
  return (q || saved || 'mobile');
}

function applyLang(){
  document.querySelectorAll('[data-i18n]').forEach(el=>{
    const k = el.getAttribute('data-i18n');
    el.textContent = t(k);
  });
  document.documentElement.lang = state.lang;
  document.getElementById('langSelect').value = state.lang;
  const url = new URL(location.href);
  url.searchParams.set('lang', state.lang);
  history.replaceState({}, '', url);
  localStorage.setItem('vd_lang', state.lang);
}
function applyLayout(){
  document.body.classList.toggle('layout-desktop', state.layout==='desktop');
  document.getElementById('layoutSelect').value = state.layout;
  const url = new URL(location.href);
  url.searchParams.set('layout', state.layout);
  history.replaceState({}, '', url);
  localStorage.setItem('vd_layout', state.layout);
}

/* ========= Router ========= */
function showSection(id){
  state.previousSection = state.currentSection;
  state.currentSection = id;
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  window.scrollTo({top:0, behavior:'instant'});
}
function toast(msg){
  const el = document.getElementById('toast');
  el.textContent = msg;
  el.style.display='block';
  setTimeout(()=>{ el.style.display='none'; }, 1400);
}

/* ========= Render Cards ========= */
function renderCards(){
  const wrap = document.getElementById('cardsList');
  wrap.innerHTML = '';
  CARDS.forEach(c=>{
    const div = document.createElement('div');
    div.className='card';
    div.innerHTML = `
      <div class="tag">${c.sting}</div>
      <h3>${c.title}</h3>
      <div class="muted">${c.ask}</div>
    `;
    div.addEventListener('click', ()=>{
      const content = document.getElementById('detailContent');
      content.innerHTML = `<h2>${c.title}</h2><div class="muted">${c.sting} Â· ${c.ask}</div><div style="height:10px"></div>${c.body}`;
      document.getElementById('detailView').classList.add('active');
      showSection('home-cards');
      document.getElementById('detailView').scrollIntoView({behavior:'instant'});
    });
    wrap.appendChild(div);
  });
  document.getElementById('backToCards').onclick = ()=>{
    document.getElementById('detailView').classList.remove('active');
    document.getElementById('cardsList').scrollIntoView({behavior:'instant'});
  };
}

function renderAbout(){
  const wrap = document.getElementById('aboutCards');
  wrap.innerHTML='';
  ABOUT.forEach(item=>{
    const div = document.createElement('div');
    div.className='card';
    div.innerHTML = `<h3>${item.title}</h3><div class="long">${item.body}</div>`;
    wrap.appendChild(div);
  });
}

/* ========= Init ========= */
(function(){
  state.lang = detectLang();
  state.layout = detectLayout();
  applyLang();
  applyLayout();
  renderCards();
  renderAbout();

  // Navbar
  document.getElementById('nav-home').addEventListener('click', e=>{ e.preventDefault(); showSection('home-hero'); });
  document.getElementById('nav-home-btn').addEventListener('click', e=>{ e.preventDefault(); showSection('home-hero'); });
  document.getElementById('nav-stories-btn').addEventListener('click', e=>{ e.preventDefault(); showSection('stories'); });
  document.getElementById('nav-about-btn').addEventListener('click', e=>{ e.preventDefault(); showSection('about'); });

  // Hero CTA -> cards (step2)
  document.getElementById('startBtn').addEventListener('click', ()=>{
    showSection('home-cards');
    toast(state.lang==='zh' ? 'å·²è¿›å…¥é€‰å¡é¡µ' : 'Entering cardsâ€¦');
  });

  // Lang + Layout
  document.getElementById('langSelect').addEventListener('change', (e)=>{
    state.lang = e.target.value;
    applyLang();
    toast({en:'Language switched', zh:'å·²åˆ‡æ¢è¯­è¨€', ja:'è¨€èªã‚’åˆ‡æ›¿ãˆã¾ã—ãŸ', ko:'ì–¸ì–´ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤'}[state.lang]||'OK');
  });
  document.getElementById('layoutSelect').addEventListener('change', (e)=>{
    state.layout = e.target.value;
    applyLayout();
    toast(state.lang==='zh' ? (state.layout==='desktop'?'å·²åˆ‡æ¢ä¸ºç”µè„‘ç‰ˆ':'å·²åˆ‡æ¢ä¸ºæ‰‹æœºç‰ˆ')
         : (state.layout==='desktop'?'Desktop layout':'Mobile layout'));
  });

  // Ensure home-cards cannot be accessed from nav directly (per spec),
  // so clicking Home always goes to hero (step1). Direct URL can still show due to anchor not used.
})();
</script>
</body>
</html>
